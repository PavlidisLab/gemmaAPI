---
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
devtools::load_all()
```

# Gemma API

[![Build Status](https://travis-ci.org/oganm/gemmaAPI.svg?branch=master)](https://travis-ci.org/oganm/gemmaAPI) [![codecov](https://codecov.io/gh/oganm/gemmaAPI/branch/master/graph/badge.svg)](https://codecov.io/gh/oganm/gemmaAPI)



This is an R wrapper for [Gemma](http://www.chibi.ubc.ca/Gemma/home.html)'s restful [API](http://www.chibi.ubc.ca/Gemma/resources/restapidocs/).


To cite Gemma, please use: 
[Zoubarev, A., et al., Gemma: A resource for the re-use, sharing and meta-analysis of expression profiling data. Bioinformatics, 2012.](http://dx.doi.org/doi:10.1093/bioinformatics/bts430)


# Installation

```
devtools::install_github('oganm/gemmaAPI')
```

# Documentation

For basic api calls see `?endpointFunctions`. These functions return mostly unaltered data from a given API endpoint.

For high level functions see `?highLevelFunctions`. These functions return data compiled from multiple api calls.

# Examples

Download data for a dataset

```{r}
data = 
    datasetInfo('GSE81454',
                request='data', # we want this endpoint to return data. see documentation
                filter = FALSE, # data request accepts filter argument we want non filtered data
                return = TRUE, # TRUE by default, all functions have this. if false there'll be no return
                file = NULL # NULL by default, all functions have this. If specificed, output will be saved.
    )

head(data) %>% knitr::kable(format ='markdown')
```


Get metadata for first 10 mouse studies.

```{r}
mouseStudies = taxonInfo('mouse',request = 'datasets',limit = 0)
studyIDs = mouseStudies %>% purrr::map_int('id')
mouseMetadata = studyIDs[1:10] %>% lapply(compileMetadata)
mouseMetadata[[1]] %>% head %>% knitr::kable(format ='markdown')
```

Download expression data a study

```{r,eval=FALSE}
studyIDs %>% sapply(function(x){datasetInfo(x,request= 'data',return= FALSE, file = paste0('data/',x))})
```